# 板式家具加工工艺流程设计系统 - 优化版

## 🎯 系统概述

这是一个经过全面优化的板式家具加工工艺流程设计和管理系统，支持**多产品多部件管理**，具备**智能工时计算**和**自动成本核算**功能。

## ✨ 核心优化特性

### 🏗️ 多层级管理架构
- **产品级管理**：支持多个产品的独立管理
- **部件级管理**：每个产品可包含多个部件
- **工序级管理**：每个部件可独立编辑工艺流程

### 🧮 智能计算引擎
- **自动工时计算**：根据部件尺寸、材料、开孔次数等自动计算工时
- **实时成本核算**：材料成本 + 工序成本 = 部件总成本
- **产品成本汇总**：所有部件成本自动汇总为产品总成本

### 📊 数据驱动决策
- **实时统计**：产品、部件、工序的实时统计信息
- **成本分析**：详细的成本构成分析
- **进度跟踪**：多层级的状态跟踪和进度管理

## 🚀 功能特性

### 1. 产品管理
- ✅ 产品增删改查
- ✅ 产品状态跟踪
- ✅ 产品成本汇总
- ✅ 产品工时统计

### 2. 部件管理
- ✅ 部件信息管理（尺寸、材料、厚度等）
- ✅ 部件工艺流程设计
- ✅ 部件成本自动计算
- ✅ 部件工时自动估算

### 3. 工序管理
- ✅ 工序可视化流程图
- ✅ 工序状态实时更新
- ✅ 工序成本自动计算
- ✅ 工序工时智能估算

### 4. 智能计算
- ✅ 基于尺寸的工时计算
- ✅ 基于材料的成本计算
- ✅ 基于开孔次数的工时调整
- ✅ 基于封边数量的工时调整

## 🎨 界面特性

### 现代化设计
- **响应式布局**：支持桌面端和移动端
- **直观导航**：面包屑导航，层级清晰
- **实时反馈**：操作结果即时反馈
- **美观配色**：专业的视觉设计

### 交互体验
- **拖拽操作**：流程图节点可拖拽
- **状态切换**：工序状态一键切换
- **批量操作**：支持批量编辑和删除
- **搜索筛选**：支持数据搜索和筛选

## 📈 计算逻辑

### 工时计算规则
```typescript
// 基础工时系数
const BASE_TIME_FACTORS = {
  '切割': 0.5,    // 每平方米基础工时
  '封边': 0.3,    // 每米封边工时
  '钻孔': 0.1,    // 每个孔工时
  '组装': 0.8,    // 每平方米组装工时
  '打磨': 0.4,    // 每平方米打磨工时
  '喷漆': 1.2,    // 每平方米喷漆工时
};

// 材料调整系数
- 实木板：+30% 工时
- 防火板：+10% 工时
- 厚板（>25mm）：+20% 工时
```

### 成本计算规则
```typescript
// 材料单价（元/平方米）
const MATERIAL_PRICES = {
  '实木板': 120,
  '密度板': 45,
  '刨花板': 35,
  '多层板': 60,
  '胶合板': 50,
  '中纤板': 40,
  '防火板': 80,
  '生态板': 70,
};

// 设备工时费率（元/小时）
const EQUIPMENT_RATES = {
  '切割机': 80,
  '数控切割机': 120,
  '封边机': 100,
  '钻孔机': 90,
  '组装工具': 60,
  '打磨机': 70,
  '喷漆设备': 150,
  '包装设备': 50,
};
```

## 🛠️ 技术架构

### 前端技术栈
- **React 19**：最新版本，性能优异
- **TypeScript**：类型安全，开发体验佳
- **Ant Design 5**：企业级UI组件库
- **ReactFlow**：专业的流程图组件
- **Vite**：快速的构建工具

### 项目结构
```
src/
├── components/           # 组件目录
│   ├── ProductList.tsx      # 产品列表组件
│   ├── ComponentManager.tsx # 部件管理组件
│   └── ProcessStepManager.tsx # 工序管理组件
├── types/               # 类型定义
│   └── index.ts
├── utils/               # 工具函数
│   └── calculations.ts  # 计算逻辑
├── App.tsx              # 主应用组件
└── main.tsx             # 应用入口
```

### 数据模型
```typescript
// 产品模型
interface Product {
  id: string;
  name: string;
  description: string;
  components: Component[];
  totalCost: number;
  totalDuration: number;
  status: ProcessStatus;
  createdAt: Date;
  updatedAt: Date;
}

// 部件模型
interface Component {
  id: string;
  name: string;
  description: string;
  dimensions: { length: number; width: number; height: number };
  material: string;
  thickness: number;
  holeCount: number;
  edgeCount: number;
  processSteps: ProcessStep[];
  totalCost: number;
  totalDuration: number;
}

// 工序模型
interface ProcessStep {
  id: string;
  name: string;
  description: string;
  duration: number;
  equipment: string;
  materials: string[];
  status: ProcessStatus;
  cost: number;
}
```

## 🎮 使用指南

### 1. 创建产品
1. 点击"添加产品"按钮
2. 填写产品名称和描述
3. 点击"确定"保存

### 2. 添加部件
1. 选择产品，进入部件管理
2. 点击"添加部件"按钮
3. 填写部件信息：
   - 名称和描述
   - 尺寸（长×宽×高）
   - 材料和厚度
   - 开孔次数和封边数量
4. 点击"确定"保存

### 3. 设计工艺流程
1. 点击部件的"工序"按钮
2. 在工序管理界面点击"添加工序"
3. 填写工序信息：
   - 工序名称和描述
   - 所需设备
   - 所需材料
4. 系统自动计算工时和成本
5. 点击"确定"保存

### 4. 管理状态
1. 在工序列表中修改状态
2. 状态变化实时反映在流程图中
3. 成本和工时自动更新

## 📊 数据展示

### 统计面板
- **产品级统计**：总产品数、已完成、进行中、总成本
- **部件级统计**：部件数量、总工序数、总成本、总工时
- **工序级统计**：总工序数、已完成、进行中、总工时

### 可视化图表
- **流程图**：工序流程的可视化展示
- **状态标识**：不同颜色表示不同状态
- **实时更新**：状态变化即时反映

## 🔧 扩展功能

### 已实现功能
- ✅ 多产品管理
- ✅ 多部件管理
- ✅ 智能工时计算
- ✅ 自动成本核算
- ✅ 实时状态跟踪
- ✅ 可视化流程图

### 可扩展功能
- [ ] 数据导入导出
- [ ] 报表生成
- [ ] 用户权限管理
- [ ] 历史记录
- [ ] 批量操作
- [ ] 数据备份恢复

## 🚀 快速开始

### 环境要求
- Node.js >= 16.0.0
- npm >= 8.0.0

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

## 📝 更新日志

### v2.0.0 (2024-01-20)
- ✨ 新增多产品管理功能
- ✨ 新增多部件管理功能
- ✨ 新增智能工时计算
- ✨ 新增自动成本核算
- ✨ 新增实时状态跟踪
- 🎨 优化用户界面设计
- 🔧 重构代码架构

### v1.0.0 (2024-01-15)
- 🎉 初始版本发布
- ✅ 基础工序管理
- ✅ 流程图可视化
- ✅ 状态管理

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 联系方式

如有问题或建议，请提交 Issue 或联系开发团队。

---

**享受您的智能工艺流程设计体验！** 🎉